#include<stdio.h>
#include<stdlib.h>


int mem[1000];
int reg[5];
int lc=0;
void main(int argc,char *argv[])
{
char fnm[20];
FILE *fp;
if(argc<1)
{
printf("\n enter file name :");
scanf("%s",fnm);
fp=fopen(fnm,"r");
}
else
{
fp=fopen(argv[1],"r");
}

if(fp==NULL)
{
printf("\n Could not open file.");
exit(0);
}
else 
load(fp);
}

void load(FILE *f)
{
int i=0;
while(!feof(f))
{
fscanf(f,"%d",&mem[i]);
printf("\n%d] %d",i,mem[i]);
i++;
lc++;
}
fclose(f);
exec();
}

void exec()
{
int opcode,regno,memloc,dp=0;;
int num,bcregno,bcmemloc;
while(1)
{
num=mem[dp];
opcode=num/10000;
num=num%10000;
regno=num/1000;
num=num%1000;
memloc=num;

switch(opcode)
{
case 1:reg[regno]+=mem[memloc]; break;
case 2:reg[regno]=reg[regno]-mem[memloc]; break;
case 3:reg[regno]=reg[regno]*mem[memloc]; break;
case 4:reg[regno]=mem[memloc]; break;
case 5:mem[memloc]=reg[regno]; break;
case 6:bcregno=regno;bcmemloc=memloc;break;

case 7:
switch(regno)
{
case 1: if(reg[bcregno]<mem[bcmemloc])
        {
        dp=memloc-1;break;
        } 
        else 
        break;
case 2: if(reg[bcregno]<=mem[bcmemloc])
        {
        dp=memloc-1;break;
        } 
        else 
        break;
case 3: if(reg[bcregno]==mem[bcmemloc])
        {
        dp=memloc-1;break;
        } 
        else 
        break;
case 4: if(reg[bcregno]>mem[bcmemloc])
        {
        dp=memloc-1;break;
        } 
        else 
        break;
case 5: if(reg[bcregno]>=mem[bcmemloc])
        {
        dp=memloc-1;break;
        } 
        else 
        break;
case 6: if(reg[bcregno]!=mem[bcmemloc])
        {
        dp=memloc-1;break;
        } 
        else 
        break;
default: exit(0);
}
break;

case 8:reg[regno]=reg[regno]/mem[memloc];break;
case 9:printf("\n Enter number ");scanf("%d",&mem[memloc]);break;
case 10:printf("\n%d",mem[memloc]);break;
case 0: exit(0);break;
default: exit(0);
}
dp++;
}

}
